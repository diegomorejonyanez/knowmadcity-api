(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d216de6"],{c3ff:function(t,e,i){"use strict";i.r(e);var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("Layout",{staticClass:"authentication-bg-clients"},[i("PageHeader",{attrs:{title:t.title,items:t.items}}),i("div",{staticClass:"row"},[i("div",{staticClass:"col-lg-6"},[i("div",{staticClass:"row"},[i("div",{staticClass:"col-lg-12"},[i("h4",{staticClass:"text-white"},[t._v("Información del Proyecto: "+t._s(t.proyectos.titulo)+" ")]),i("div",{staticClass:"card border-secondary p-3"},[i("br"),i("p",{attrs:{align:"center"}},[i("img",{staticClass:"rounded",staticStyle:{float:"center!importan"},attrs:{width:"150",height:"150",src:t.proyectos.empresa.logo}})]),i("div",{staticClass:"card-body"},[i("h5",{staticClass:"card-title",attrs:{align:"center"}},[t._v(t._s(t.proyectos.titulo))]),i("p",{attrs:{algn:"center"}},[t._v("Empresa: "),i("span",{staticClass:"badge badge-info"},[t._v(t._s(t.proyectos.empresa.nombre)+" ")]),t._v(" Estado del Proyecto: "),i("span",{staticClass:"badge badge-warning"},[t._v(t._s(t.form.status)+" ")])]),i("p",{staticClass:"card-text",attrs:{align:"justify"}},[t._v("Descripción: "+t._s(t.proyectos.descripcion)+" ")]),i("p",{staticClass:"card-text",attrs:{align:"justify"}},[t._v("Presupuesto: "+t._s(t.proyectos.presupuesto)+" ")]),i("p",{staticClass:"card-text",attrs:{align:"justify"}},[t._v("Descripción de la iniciativa: "),i("br"),i("ol",t._l(t.form.descripcion_iniciativa,(function(e,o){return i("li",{key:o},[t._v(t._s(e.nombre)+" "),i("button",{staticClass:"btn btn-sm btn-danger",on:{click:function(e){return t.eliminarIniciativa(o)}}},[t._v("x")])])})),0)]),i("p",{staticClass:"card-text",attrs:{align:"justify"}},[t._v("Objetivos: "),i("br"),i("ol",t._l(t.form.objetivos,(function(e,o){return i("li",{key:o},[t._v(t._s(e.nombre)+" "),i("button",{staticClass:"btn btn-sm btn-danger",on:{click:function(e){return t.eliminarIniciativa(o)}}},[t._v("x")])])})),0)])]),i("div",{},[i("p",{attrs:{align:"center"}},[i("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-1",modifiers:{"modal-1":!0}}]},[t._v("Ver Descripción Completa")])],1)]),i("br")])])])]),i("div",{staticClass:"col-lg-6"},[i("h4",{staticClass:"text-white"},[t._v("Soporte del Proyecto:")]),i("div",[i("VueDocPreview",{attrs:{value:t.proyectos.archivo,type:"office"}})],1)])]),i("div"),i("b-modal",{attrs:{id:"modal-1",size:"lg","hidde-footer":""}},[i("div",{staticClass:"card border-secondary"},[t.url?i("img",{staticClass:"rounded",staticStyle:{float:"center!importan"},attrs:{width:"100%",src:t.url}}):t._e(),i("div",{staticClass:"card-body"},[i("p",{attrs:{align:"center "}},[i("img",{staticClass:"rounded",staticStyle:{float:"center!importan"},attrs:{width:"150",height:"150",src:t.proyectos.empresa.logo}})]),i("h5",{staticClass:"card-title",attrs:{align:"center"}},[t._v("Título del Proyecto: "+t._s(t.form.titulo))]),i("p",{attrs:{algn:"center"}},[t._v("Empresa: "),i("span",{staticClass:"badge badge-info"},[t._v(t._s(t.proyectos.empresa.nombre)+" ")]),t._v(" - Fecha de Creación de Proyecto: "),i("span",{staticClass:"badge badge-info"},[t._v(t._s(t.proyectos.created_at))]),t._v(" - Estado del Proyecto: "),i("span",{staticClass:"badge badge-warning"},[t._v(t._s(t.proyectos.status)+" ")])]),i("div",{staticClass:"row"},[i("div",{staticClass:"col-lg-6"},[i("p",{staticClass:"card-text",attrs:{align:"justify"}},[t._v("Descripción: "+t._s(t.proyectos.descripcion)+" ")])]),i("div",{staticClass:"col-lg-6"},[i("p",{staticClass:"card-text",attrs:{align:"justify"}},[t._v("Descripción de la Iniciativa: "),i("ol",t._l(t.form.descripcion_iniciativa,(function(e,o){return i("li",{key:o},[t._v(t._s(e.nombre)+" "),i("button",{staticClass:"btn btn-sm btn-danger",on:{click:function(e){return t.eliminarIniciativa(o)}}},[t._v("x")])])})),0)]),i("br"),i("br")]),i("div",{staticClass:"col-lg-6"},[t._v("Promotores: ")]),i("div",{staticClass:"col-lg-6"},[t._v("Objetivos: "),i("ol",t._l(t.form.obejtivos,(function(e,o){return i("li",{key:o},[t._v(t._s(t.objtivoss.nombre)+" "),i("button",{staticClass:"btn btn-sm btn-danger",on:{click:function(e){return t.eliminarIniciativa(o)}}},[t._v("x")])])})),0)]),i("br"),i("br"),i("div",{staticClass:"col-lg-6"},[t._v("Observaciones: ")]),i("div",{staticClass:"col-lg-6"},[t._v("Justificación")]),i("br"),i("br"),i("div",{staticClass:"col-lg-12"},[i("div",{staticClass:"row"},[i("div",{staticClass:"col-lg-6"},[t._v("Metas: "+t._s(t.proyectos.metas)+" ")]),i("div",{staticClass:"col-lg-6"})])]),i("br"),i("br")]),i("p",{staticClass:"card-text"},[i("small",{staticClass:"text-muted"},[t._v("Presupuesto: "+t._s(t.proyectos.presupuesto))])])])])]),i("footer",{staticClass:"footer dark",staticStyle:{"background-color":"#505d69",color:"#fff"}},[i("div",{staticClass:"container-fluid"},[i("div",{staticClass:"row"},[i("div",{staticClass:"col-sm-6"},[t._v(" 2021 © ")]),i("div",{staticClass:"col-sm-6"},[i("div",{staticClass:"text-sm-right d-none d-sm-block"},[t._v(" Desarrollado por © Innova Tu Hotel ")])])])])])],1)},r=[],s=i("1da1"),a=i("5530"),n=i("ade3"),c=(i("a434"),i("2b3d"),i("d3b7"),i("3ca3"),i("ddb0"),i("96cf"),i("6dfc"),i("4a7a")),l=i.n(c),u=i("92c3"),p=i.n(u),d=i("2f62"),m=i("7bb1"),f=i("5658"),h=i("2579"),v=i("6480"),b=i("2ee4"),g=(i("da93"),i("e8c3")),y=i.n(g),_={components:{vueDropzone:p.a,Layout:f["a"],PageHeader:h["a"],ValidationProvider:m["b"],ValidationObserver:m["a"],vSelect:l.a,VueHtml2pdf:v["a"],FormWizard:b["FormWizard"],TabContent:b["TabContent"],VueDocPreview:y.a},data:function(){var t;return t={title:"Proyecto",items:[{text:"Gestión corporativa"},{text:"proyecto",active:!0}],dropzoneOptions:{thumbnailWidth:150,maxFilesize:.5,headers:{"My-Awesome-Header":"header value"}},word:!1,ver:!1,url:"",url_firma:"",modal:!0,file:null,firma:null,email:"",password:"",totalRows:1,currentPage:1,perPage:10,pageOptions:[10,25,50,100],filter:null,filterOn:[],sortBy:"age",sortDesc:!1,fields:["titulo","presupuesto","empresa","estado","actions"],proyectos:[],areas:[]},Object(n["a"])(t,"proyectos",[]),Object(n["a"])(t,"empresas",[]),Object(n["a"])(t,"clientes",[]),Object(n["a"])(t,"clien",[]),Object(n["a"])(t,"users",[]),Object(n["a"])(t,"cliente",""),Object(n["a"])(t,"client",""),Object(n["a"])(t,"editMode",!1),Object(n["a"])(t,"form",{titulo:"",iniciativa:"",descripcion_iniciativa:[],promotor:"",descripcion:"",promotores:[],metas:[],objetivo:"",objetivos:[],presupuesto:"",empresa_id:"",aprueba_id:""}),t},watch:{cliente:function(t){this.form.cliente_id=t,this.listarEmpresas()},client:function(t){this.form.cliente_id=t,this.listarProyectos()}},props:{finishButtonText:{type:String,default:"Completar",hidden:!0}},methods:Object(a["a"])(Object(a["a"])({},Object(d["b"])(["guardarUsuario"])),{},{submit:function(){return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:console.log("email submitted!");case 1:case"end":return t.stop()}}),t)})))()},resete:function(){var t=this.form;for(var e in t)"descripcion_iniciativa"==e?this.form.descripcion_iniciativa=[]:"promotores"==e?this.form.promotores=[]:"objetivos"==e?this.form.objetivos=[]:this.form[e]=""},switchLoc:function(){var t=this;this.editMode?this.$refs.form.validate().then((function(e){e&&t.editarProyecto()})):this.$refs.form.validate().then((function(e){e&&t.agregarProyecto()}))},cargarPromotor:function(){this.form.promotores.push({nombre:this.form.promotor})},eliminarpromotor:function(t){this.form.promotores.splice(t,1)},cargarObjetivo:function(){this.form.objetivos.push({nombre:this.form.objetivo})},eliminarObjetivo:function(t){this.form.objetivos.splice(t,1)},cargarIniciativa:function(){this.form.descripcion_iniciativa.push({nombre:this.form.iniciativa})},eliminarIniciativa:function(t){this.form.descripcion_iniciativa.splice(t,1)},onFiltered:function(t){this.totalRows=t.length,this.currentPage=1},agregarProyecto:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var i,o,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(r in i=new FormData,o=t.form,o)"descripcion_iniciativa"==r||"promotores"==r||"objetivos"==r?i.append(r,JSON.stringify(o[r])):i.append(r,o[r]);return t.file&&i.append("filename",t.file),e.next=6,t.axios.post("api/proyectos",i,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){200==e.status&&(t.$swal("Creado!!!","","success"),t.listarProyectos(),t.$root.$emit("bv::hide::modal","modal","#btnShow"))})).catch((function(e){t.$swal("Nose pudo crear!!!","","warning")}));case 6:case"end":return e.stop()}}),e)})))()},editarProyecto:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var i,o,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(r in i=new FormData,o=t.form,o)"descripcion_iniciativa"==r||"promotores"==r||"objetivos"==r?i.append(r,JSON.stringify(o[r])):i.append(r,o[r]);return t.file&&i.append("filename",t.file),e.next=6,t.axios.put("api/proyectos",i,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){if(200==e.status)for(var i in t.$swal("Editado con exito","","success"),t.listarProyectos(),t.$root.$emit("bv::hide::modal","modal","#btnShow"),o)t.form[i]=""})).catch((function(e){t.$swal("ocurrio un problema","","warning")}));case 6:case"end":return e.stop()}}),e)})))()},setear:function(){this.form.id=this.proyectos.id,this.form.numero=this.proyectos.numero,this.form.titulo=this.proyectos.titulo,this.form.status=this.proyectos.status,this.form.presupuesto=this.proyectos.presupuesto,this.form.promotores=JSON.parse(this.proyectos.promotores),this.form.objetivos=JSON.parse(this.proyectos.objetivos),this.form.descripcion_iniciativa=JSON.parse(this.proyectos.descripcion_iniciativa),this.form.justificacion=this.proyectos.justificacion,this.form.descripcion=this.proyectos.descripcion,this.form.empresa_id=this.proyectos.empresa_id,this.form.archivo=this.proyectos.archivo,this.form.cliente_id=this.proyectos.empresa.cliente_id,this.form.aprueba_id=this.proyectos.aprueba_id},verdocumento:function(t){for(var e=0;e<this.proyectos.length;e++)if(this.proyectos[e].id===t)return this.cliente=this.proyectos[e].empresa.cliente_id,this.form.id=this.proyectos[e].id,this.form.numero=this.proyectos[e].numero,this.form.titulo=this.proyectos[e].titulo,this.form.presupuesto=this.proyectos[e].presupuesto,this.form.promotores=JSON.parse(this.proyectos[e].promotores),this.form.objetivos=JSON.parse(this.proyectos[e].objetivos),this.form.descripcion_iniciativa=JSON.parse(this.proyectos[e].descripcion_iniciativa),this.form.justificacion=this.proyectos[e].justificacion,this.form.empresa_id=this.proyectos[e].empresa_id,this.form.archivo=this.proyectos[e].archivo,this.form.cliente_id=this.proyectos[e].empresa.cliente_id,this.form.aprueba_id=this.proyectos[e].empresa.aprueba_id,void this.$root.$emit("bv::show::modal","modal_ver","#btnShow")},generateReport:function(){this.$refs.html2Pdf.generatePdf()},eliminarProyecto:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function i(){var o;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return o=new FormData,o.append("id",t),i.next=4,e.axios.post("api/proyectos/delete",o,{headers:{"Content-Type":"multipart/form-data"}}).then((function(t){200==t.status&&(e.$swal("Eliminado con exito!","","success"),e.listarProyectos())})).catch((function(t){console.log(t.response.data.menssage),e.$swal(t.response.data)}));case 4:case"end":return i.stop()}}),i)})))()},eliminar:function(t){var e=this;this.$swal({title:"Desea borrar esta proyecto?",icon:"question",iconHtml:"",confirmButtonText:"Si",cancelButtonText:"No",showCancelButton:!0,showCloseButton:!0}).then((function(i){i.isConfirmed&&e.eliminarProyecto(t)}))},listarclientes:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.axios.get("api/clientes").then((function(e){t.clientes=e.data,t.clien=e.data})).catch((function(t){console.log("error"+t)}));case 2:case"end":return e.stop()}}),e)})))()},listarEmpresas:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=new FormData,i.append("cliente_id",t.form.cliente_id),e.next=4,t.axios.post("api/empresas/listar",i).then((function(e){t.empresas=e.data})).catch((function(t){console.log("error"+t)}));case 4:case"end":return e.stop()}}),e)})))()},listarProyectos:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=new FormData,i.append("id",t.$route.params.id),console.log(t.$route.params.id),e.next=5,t.axios.post("api/proyectos/find",i).then((function(e){t.proyectos=e.data,t.setear()})).catch((function(t){console.log("error"+t)}));case 5:case"end":return e.stop()}}),e)})))()},setEmail:function(){this.form.username=this.form.email},setRoles:function(){"Administrador"===this.form.tipo?(this.form.codigo="",this.form.entidad="No",this.form.cargo="",this.form.roles="3"):"Coordinador"===this.form.tipo?(this.form.entidad="No",this.form.cargo="",this.form.roles="2"):this.form.roles="1"},listarUsers:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.axios.get("api/user/admin").then((function(e){t.users=e.data.rows})).catch((function(t){console.log("error"+t)}));case 2:case"end":return e.stop()}}),e)})))()},onFileChange:function(t){var e=t.target.files[0];this.url=URL.createObjectURL(e)},onFileChangeFirma:function(t){var e=t.target.files[0];this.url_firma=URL.createObjectURL(e)},toggleModal:function(){this.modal=!this.modal},session:function(){if(localStorage.getItem("token")){var t=localStorage.getItem("token");this.guardarUsuario(t)}else this.$router.push({name:"Home"})}}),created:function(){this.session(),this.listarProyectos()},computed:{rows:function(){return this.proyectos.length}}},w=_,C=i("2877"),j=Object(C["a"])(w,o,r,!1,null,null,null);e["default"]=j.exports}}]);
//# sourceMappingURL=chunk-2d216de6.ca1452ad.js.map