(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-39c96584"],{"5b70":function(t,e,o){t.exports=o.p+"img/undraw_fill_form_re_cwyf.9fa52eb4.svg"},"66c2":function(t,e,o){t.exports=o.p+"img/presupuesto.9eed2332.svg"},b5d7:function(t,e,o){"use strict";o.r(e);var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("Layout",{staticClass:"authentication-bg"},[i("PageHeader",{attrs:{title:t.title,items:t.items}}),i("div",{staticClass:"clearfix mb-3"},[i("b-button",{staticClass:"float-right btn-info",attrs:{left:""},on:{click:function(e){t.$bvModal.show("modal"),t.resete(),t.editMode=!1}}},[t._v("Crear proyectos")])],1),i("div",{staticClass:"row"},[i("div",{staticClass:"col-12"},[i("div",{staticClass:"card",staticStyle:{"background-color":"rgba(0,0,0,0.5)",color:"#fff"}},[i("div",{staticClass:"row p-2"},[i("div",{staticClass:"col-4 pl-4"},[i("label",[t._v("Seleccione el cliente para filtrar sus proyectos")]),i("v-select",{staticStyle:{"background-color":"rgba(255,255,255,0.5)",color:"#fff","border-radius":"25px"},attrs:{options:t.clientes,reduce:function(t){return t.id},getOptionLabel:function(t){return t.nombre}},model:{value:t.client,callback:function(e){t.client=e},expression:"client"}})],1),i("div",{staticClass:"col-4 pl-4"},[i("label",{staticClass:"d-inline-flex align-items-center"},[t._v(" Buscar: escriba el nombre del proyecto")]),i("b-form-input",{staticClass:"form-control form-control-sm ml-2",staticStyle:{"background-color":"rgba(255,255,255,0.5)",color:"#fff","border-radius":"25px"},attrs:{type:"search",placeholder:"Escriba el nombre del proyecto aqui..."},model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}})],1)]),i("div",{staticClass:"card-body"},[i("h4",{staticClass:"card-title"}),i("div",{staticClass:"row mt-4"},[i("div",{staticClass:"col-sm-12 col-md-6"},[i("div",{staticClass:"dataTables_length",attrs:{id:"tickets-table_length"}},[i("label",{staticClass:"d-inline-flex align-items-center"},[t._v(" Mostrar "),i("b-form-select",{attrs:{size:"sm",options:t.pageOptions},model:{value:t.perPage,callback:function(e){t.perPage=e},expression:"perPage"}}),t._v(" Proyectos ")],1)])])]),i("div",{staticClass:"table-responsive mb-0",staticStyle:{"min-height":"400px"}},[i("b-table",{attrs:{items:t.proyectos,fields:t.fields,responsive:"sm","per-page":t.perPage,"current-page":t.currentPage,"sort-by":t.sortBy,"sort-desc":t.sortDesc,filter:t.filter,"filter-included-fields":t.filterOn},on:{"update:sortBy":function(e){t.sortBy=e},"update:sort-by":function(e){t.sortBy=e},"update:sortDesc":function(e){t.sortDesc=e},"update:sort-desc":function(e){t.sortDesc=e},filtered:t.onFiltered},scopedSlots:t._u([{key:"cell(empresa)",fn:function(e){return[t._v(" "+t._s(e.item.empresa.nombre)+" ")]}},{key:"cell(estado)",fn:function(e){return["Creado"===e.item.status?i("span",{staticClass:"badge badge-info"},[t._v("Creado")]):t._e(),"Pendiente"===e.item.status?i("span",{staticClass:"badge badge-warning"},[t._v("Pendiente")]):t._e(),"Aprobado"===e.item.status?i("span",{staticClass:"badge badge-success"},[t._v("Aprobado")]):t._e(),"Rechazado"===e.item.status?i("span",{staticClass:"badge badge-danger"},[t._v("Rechazado")]):t._e()]}},{key:"cell(actions)",fn:function(e){return[i("b-dropdown",{attrs:{size:"sm"},scopedSlots:t._u([{key:"button-content",fn:function(){return[t._v(" Acciones "),i("i",{staticClass:"mdi mdi-chevron-down"})]},proxy:!0}],null,!0)},[i("b-dropdown-item-button",{on:{click:function(o){return t.notificarConsulta(e.item.id,e.item.aprueba_id)}}},[t._v("Notificar")]),i("b-dropdown-item-button",{on:{click:function(o){return t.notificarConsultaAprobar(e.item.id,e.item.elabora_id)}}},[t._v("Aprobar")]),i("b-dropdown-item-button",{on:{click:function(o){t.editMode=!0,t.setearObservaciones(e.item.id)}}},[t._v("Rechazar")]),i("b-dropdown-item-button",{on:{click:function(o){t.editMode=!0,t.setear(e.item.id)}}},[t._v("Editar Proyecto")]),i("b-dropdown-item-button",{on:{click:function(o){t.editMode=!0,t.eliminar(e.item.id)}}},[t._v("Eliminar Proyecto")]),i("b-dropdown-item-button",[i("a",{attrs:{href:"proyecto/"+e.item.id}},[t._v("Ver")])])],1)]}}])})],1),i("div",{staticClass:"row"},[i("div",{staticClass:"col"},[i("div",{staticClass:"dataTables_paginate paging_simple_numbers float-right"},[i("ul",{staticClass:"pagination pagination-rounded mb-0"},[i("b-pagination",{attrs:{"total-rows":t.rows,"per-page":t.perPage},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)])])])])])])]),i("br"),i("br"),i("br"),i("b-modal",{attrs:{id:"modal",false:"",size:"lg","hide-footer":"",title:"Gestión de proyectos","ok-only":""}},[i("ValidationObserver",{ref:"form"},[i("form-wizard",{attrs:{"next-button-text":"Siguiente","back-button-text":"Anterior","finish-button-text":"---",color:"#7fa3a3",transition:"fade"}},[i("tab-content",{attrs:{title:"Bienvenido",subtitle:"Paso 1",icon:"ri-star-3-fill"}},[i("b-row",[""!=t.form.titulo?i("b-col",[i("p",{attrs:{align:"center"}}),i("h5",{attrs:{align:"center"}},[t._v("Bienvenido al Formulario de actualización de Proyectos")]),i("p"),i("p",{attrs:{align:"justify"}},[i("b",[t._v("En el siguiente formulario podrá editar o actualizar el proyecto según lo solicitado por el supervisor en caso de no haber sido aprobado el proyecto o que se deba modificar antes de enviar a su aprobación.")])])]):i("b-col",[i("p",{attrs:{align:"center"}}),i("h5",{attrs:{align:"center"}},[t._v("Bienvenido al Formulario de creación de Proyectos")]),i("p"),i("p",{attrs:{align:"justify"}},[i("b",[t._v("En el siguiente formulario podrá crear su proyecto según los criterios que hayan sido solicitados")])])]),i("b-col",[i("p",{attrs:{align:"center"}},[i("img",{attrs:{src:o("5b70"),width:"450",height:"250",alt:""}})])])],1)],1),i("tab-content",{attrs:{title:"Seleccionar Cliente y empresa",subtitle:"Paso 1",icon:"ri-user-3-fill"}},[i("b-row",[i("b-col",[i("br"),i("br"),""!=t.form.id?i("p",{attrs:{align:"justify"}},[t._v("Paso 1: Actualice la información necesaria ya sea el cliente, la empresa correspondiente o el surpervisor encargado de aprobar este proyecto.")]):i("p",{attrs:{align:"justify"}},[t._v("Paso 1: Elija el cliente, la empresa correspondiente y el surpervisor encargado de aprobar este proyecto.")]),i("p",{attrs:{align:"center"}},[i("img",{attrs:{src:o("e0a5"),width:"120",alin:"center",height:"120",alt:""}})])]),i("b-col",[i("ValidationProvider",{attrs:{name:"cliente",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.errors;return[i("label",[t._v("Cliente")]),i("v-select",{attrs:{options:t.clientes,reduce:function(t){return t.id},getOptionLabel:function(t){return t.nombre}},model:{value:t.cliente,callback:function(e){t.cliente=e},expression:"cliente"}}),i("span",{staticStyle:{color:"red"}},[t._v(t._s(o[0]))])]}}])}),i("ValidationProvider",{attrs:{name:"empresas",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.errors;return[i("label",[t._v("Empresas ")]),i("v-select",{attrs:{options:t.empresas,reduce:function(t){return t.id},getOptionLabel:function(t){return t.nombre}},model:{value:t.form.empresa_id,callback:function(e){t.$set(t.form,"empresa_id",e)},expression:"form.empresa_id"}}),i("span",{staticStyle:{color:"red"}},[t._v(t._s(o[0]))])]}}])}),i("ValidationProvider",{attrs:{name:"Aprueba",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.errors;return[i("label",[t._v("Supervisor que aprobará el Proyecto")]),i("v-select",{attrs:{options:t.users,reduce:function(t){return t.id},getOptionLabel:function(t){return t.nombre}},model:{value:t.form.aprueba_id,callback:function(e){t.$set(t.form,"aprueba_id",e)},expression:"form.aprueba_id"}}),i("span",{staticStyle:{color:"red"}},[t._v(t._s(o[0]))])]}}])})],1)],1)],1),i("tab-content",{attrs:{title:"Descripción del Proyecto",subtitle:"Paso 2",icon:"ri-building-2-fill"}},[i("b-row",[i("b-col",[i("br"),i("br"),""!=t.form.id?i("p",{attrs:{align:"justify"}},[t._v("Paso 2: Actualice la información necesesaria o solicitada como la descripción corta y descripción de la iniciatavita del proyecto:")]):i("p",{attrs:{align:"justify"}},[t._v("Paso 2: Indique el título, descripción corta y descripción de la iniciatavita del proyecto:")]),i("p",{attrs:{align:"center"}},[i("img",{attrs:{src:o("baad"),width:"120",alin:"center",height:"120",alt:""}})])]),i("b-col",[i("div",{staticClass:"form-group"},[i("label",[t._v("Titulo del Proyecto ")]),i("ValidationProvider",{attrs:{name:"nombre",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.errors;return[i("input",{directives:[{name:"model",rawName:"v-model",value:t.form.titulo,expression:"form.titulo"}],staticClass:"form-control",attrs:{type:"text",placeholder:" "},domProps:{value:t.form.titulo},on:{input:function(e){e.target.composing||t.$set(t.form,"titulo",e.target.value)}}}),i("span",{staticStyle:{color:"red"}},[t._v(t._s(o[0]))])]}}])})],1),i("div",{staticClass:"form-group"},[i("label",[t._v("Descripción corta ")]),i("ValidationProvider",{attrs:{name:"nombre",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.errors;return[i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.descripcion,expression:"form.descripcion"}],staticClass:"form-control",attrs:{type:"text",placeholder:" "},domProps:{value:t.form.descripcion},on:{input:function(e){e.target.composing||t.$set(t.form,"descripcion",e.target.value)}}}),i("span",{staticStyle:{color:"red"}},[t._v(t._s(o[0]))])]}}])})],1),i("label",[t._v("Descripción de la iniciativa ")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.form.iniciativa,expression:"form.iniciativa"}],staticClass:"form-control",attrs:{type:"text",placeholder:" ",size:"2"},domProps:{value:t.form.iniciativa},on:{input:function(e){e.target.composing||t.$set(t.form,"iniciativa",e.target.value)}}}),i("br"),i("p",{attrs:{align:"center"}},[i("button",{staticClass:"btn btn-sm btn-success ",attrs:{disabled:""===t.form.iniciativa},on:{click:function(e){return t.cargarIniciativa()}}},[t._v("Añadir Iniciativa")])])]),i("b-col",[i("h5",[t._v("Iniciativas Agregadas:")]),i("ol",t._l(t.form.descripcion_iniciativa,(function(e,o){return i("li",{key:o},[t._v(t._s(e.nombre)+" "),i("button",{staticClass:"btn btn-sm btn-danger",on:{click:function(e){return t.eliminarIniciativa(o)}}},[t._v("x")])])})),0)])],1)],1),i("tab-content",{attrs:{title:"Justificación del proyecto",subtitle:"Paso 3",icon:"ri-currency-fill"}},[i("b-row",[i("b-col",[i("br"),i("br"),""!=t.form.id?i("p",{attrs:{align:"justify"}},[t._v("Paso 3: Actualice la información necesaria como la justificación, objetivos, dimensiones y presupuesto del proyecto:")]):i("p",{attrs:{align:"justify"}},[t._v("Paso 3: Indique la justificación, objetivos, dimensiones y presupuesto del proyecto:")]),i("p",{attrs:{align:"center"}},[i("img",{attrs:{src:o("66c2"),width:"140",alin:"center",height:"140",alt:""}})])]),i("b-col",[i("div",{staticClass:"form-group"},[i("label",[t._v("Justificación de la necesidad: ")]),i("ValidationProvider",{attrs:{name:"nombre",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.errors;return[i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.justificacion,expression:"form.justificacion"}],staticClass:"form-control",attrs:{rows:"8",cols:"7",type:"text",placeholder:" "},domProps:{value:t.form.justificacion},on:{input:function(e){e.target.composing||t.$set(t.form,"justificacion",e.target.value)}}}),i("span",{staticStyle:{color:"red"}},[t._v(t._s(o[0]))])]}}])})],1)])],1),i("b-row",[i("b-col",[i("div",{staticClass:"col-11"},[i("div",{staticClass:"form-group form-inline"},[i("label",[t._v("Agregar Promotores: ")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.form.promotor,expression:"form.promotor"}],staticClass:"form-control",attrs:{type:"text",placeholder:" "},domProps:{value:t.form.promotor},on:{input:function(e){e.target.composing||t.$set(t.form,"promotor",e.target.value)}}}),i("button",{staticClass:"btn btn-success ",attrs:{disabled:""===t.form.promotor},on:{click:function(e){return t.cargarPromotor()}}},[t._v("+")])])])]),i("b-col",[i("h6",[t._v("Promotores agregados:")]),i("ol",t._l(t.form.promotores,(function(e,o){return i("li",{key:o},[t._v(t._s(e.nombre)+" "),i("button",{staticClass:"btn btn-sm btn-danger",on:{click:function(e){return t.eliminarpromotor(o)}}},[t._v("X")])])})),0)])],1),i("b-row",[i("b-col",[i("div",{staticClass:"col-11"},[i("div",{staticClass:"form-group form-inline"},[i("label",[t._v("Agregar Objetivos de la iniciativa: ")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.form.objetivo,expression:"form.objetivo"}],staticClass:"form-control",attrs:{type:"text",placeholder:" "},domProps:{value:t.form.objetivo},on:{input:function(e){e.target.composing||t.$set(t.form,"objetivo",e.target.value)}}}),i("button",{staticClass:"btn btn-success ",attrs:{disabled:""===t.form.objetivo},on:{click:function(e){return t.cargarObjetivo()}}},[t._v("+")])])])]),i("b-col",[i("h6",[t._v("Obejtivos de la Iniciativa agregados")]),i("ol",t._l(t.form.objetivos,(function(e,o){return i("li",{key:o},[t._v(t._s(e.nombre)+" "),i("button",{staticClass:"btn btn-sm btn-danger",on:{click:function(e){return t.eliminarObjetivo(o)}}},[t._v("X")])])})),0)])],1),i("b-row",[i("b-col",[i("div",{staticClass:"col-11"},[i("div",{staticClass:"form-group  form-inline"},[i("label",[t._v("Dimension Ecológica: ")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.form.ecologica,expression:"form.ecologica"}],staticClass:"form-control",attrs:{type:"text",placeholder:" "},domProps:{value:t.form.ecologica},on:{input:function(e){e.target.composing||t.$set(t.form,"ecologica",e.target.value)}}}),i("button",{staticClass:"btn btn-success ",attrs:{disabled:""===t.form.ecologica},on:{click:function(e){return t.cargarEcologica()}}},[t._v("+")])])])]),i("b-col",[i("h6",[t._v("Dimensión Ecológica:")]),i("ol",t._l(t.form.dimension_ecologica,(function(e,o){return i("li",{key:o},[t._v(t._s(e.nombre)+" "),i("button",{staticClass:"btn btn-sm btn-danger",on:{click:function(e){return t.eliminarEcologica(o)}}},[t._v("X")])])})),0)])],1),i("b-row",[i("b-col",[i("div",{staticClass:"col-11"},[i("div",{staticClass:"form-group form-inline"},[i("label",[t._v("Dimension Digital:")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.form.digital,expression:"form.digital"}],staticClass:"form-control",attrs:{type:"text",placeholder:" "},domProps:{value:t.form.digital},on:{input:function(e){e.target.composing||t.$set(t.form,"digital",e.target.value)}}}),i("button",{staticClass:"btn btn-success ",attrs:{disabled:""===t.form.dimension_digital},on:{click:function(e){return t.cargarDigital()}}},[t._v("+")])])])]),i("b-col",[i("h6",[t._v("Dimension Digital:")]),i("ol",t._l(t.form.dimension_digital,(function(e,o){return i("li",{key:o},[t._v(t._s(e.nombre)+" "),i("button",{staticClass:"btn btn-sm btn-danger",on:{click:function(e){return t.eliminarDigital(o)}}},[t._v("X")])])})),0)])],1),i("b-row",[i("b-col",[i("div",{staticClass:"form-group"},[""!=t.form.presupuesto?i("label",[t._v("Actualizar Presupuesto")]):t._e(),i("label",[t._v("Presupuesto")]),i("ValidationProvider",{attrs:{name:"numero de empleados",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.errors;return[i("input",{directives:[{name:"model",rawName:"v-model",value:t.form.presupuesto,expression:"form.presupuesto"}],staticClass:"form-control",attrs:{type:"text",placeholder:" "},domProps:{value:t.form.presupuesto},on:{input:function(e){e.target.composing||t.$set(t.form,"presupuesto",e.target.value)}}}),i("span",{staticStyle:{color:"red"}},[t._v(t._s(o[0]))])]}}])})],1)]),i("b-col",[""!=t.form.presupuesto?i("div",[i("h6",[t._v("Presupuesto actual:")]),t._v(" "+t._s(t.form.presupuesto)+" € ")]):t._e()])],1)],1),i("tab-content",{attrs:{title:"Guardar Proyecto",subtitle:"Paso 4",icon:"ri-save-2-fill"}},[i("b-row",[i("b-col",[i("br"),i("br"),i("p",{attrs:{align:"center"}},[i("img",{attrs:{src:o("f2aa"),width:"180",alin:"center",height:"180",alt:""}})]),""!=t.form.titulo?i("p",{attrs:{align:"justify"}},[t._v("Paso 4: Proyecto Actualizado, ya solo falta guardar los cambios y notificar al subervisor:")]):i("p",{attrs:{align:"justify"}},[t._v("Paso 4: Proyecto Completo, ya solo falta crear el proyecto y notificar al subervisor:")])]),i("b-col",[i("br"),i("p",{attrs:{align:"center"}},[i("img",{attrs:{src:o("b65a"),width:"140",alin:"center",height:"140",alt:""}})]),i("h6",[t._v("Su Proyecto será cargado y debe crear la notificación al supervisor para que proceda a la revisión.")]),t.ver||t.editMode?t._e():i("button",{staticClass:"btn btn-block float-right btn-success",on:{click:t.switchLoc}},[t._v("Crear Proyecto")]),!t.ver&&t.editMode?i("button",{staticClass:"btn btn-block float-right btn-success",on:{click:t.switchLoc}},[t._v("Guardar Cambios")]):t._e()])],1)],1)],1)],1)],1),i("b-modal",{attrs:{id:"modal_observaciones","hide-footer":""}},[i("b-row",[i("b-col",[i("p",{attrs:{align:"center"}}),i("p",{attrs:{align:"center"}},[i("img",{attrs:{src:o("3dac"),width:"180",alin:"center",height:"180",alt:""}})]),i("p")]),i("b-col",[i("div",{staticClass:"form-group"},[i("label",[t._v("Razones del rechazo del Proyecto:")]),i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.observaciones,expression:"form.observaciones"}],staticClass:"form-control",attrs:{cols:"7",rows:"6",type:"text",placeholder:" "},domProps:{value:t.form.observaciones},on:{input:function(e){e.target.composing||t.$set(t.form,"observaciones",e.target.value)}}})])])],1),i("button",{staticClass:"btn btn-danger btn-block",attrs:{disabled:""===t.form.observaciones},on:{click:function(e){return t.notificarConsultaRechazar()}}},[t._v(" Rechazar")])],1),i("footer",{staticClass:"footer dark",staticStyle:{"background-color":"#505d69",color:"#fff"}},[i("div",{staticClass:"container-fluid"},[i("div",{staticClass:"row"},[i("div",{staticClass:"col-sm-6"},[t._v(" 2021 © ")]),i("div",{staticClass:"col-sm-6"},[i("div",{staticClass:"text-sm-right d-none d-sm-block"},[t._v(" Desarrollado por © Innova Tu Hotel ")])])])])])],1)},r=[],a=o("1da1"),s=o("5530"),n=o("ade3"),c=(o("a434"),o("2b3d"),o("d3b7"),o("3ca3"),o("ddb0"),o("96cf"),o("6dfc"),o("4a7a")),l=o.n(c),u=o("92c3"),d=o.n(u),m=o("2f62"),p=o("7bb1"),f=o("5658"),b=o("2579"),v=o("6480"),h=o("2ee4"),g=(o("da93"),o("e8c3")),_=o.n(g),y={components:{vueDropzone:d.a,Layout:f["a"],PageHeader:b["a"],ValidationProvider:p["b"],ValidationObserver:p["a"],vSelect:l.a,VueHtml2pdf:v["a"],FormWizard:h["FormWizard"],TabContent:h["TabContent"],VueDocPreview:_.a},data:function(){var t;return t={title:"Administración de Proyectos",items:[{text:"Gestión corporativa"},{text:"proyectos",active:!0}],dropzoneOptions:{thumbnailWidth:150,maxFilesize:.5,headers:{"My-Awesome-Header":"header value"}},ver:!1,url:"",url_firma:"",modal:!0,file:null,firma:null,email:"",password:"",totalRows:1,currentPage:1,perPage:10,pageOptions:[10,25,50,100],filter:null,filterOn:[],sortBy:"age",sortDesc:!1,fields:["titulo","presupuesto","empresa","estado","actions"],proyectos:[],areas:[]},Object(n["a"])(t,"proyectos",[]),Object(n["a"])(t,"empresas",[]),Object(n["a"])(t,"clientes",[]),Object(n["a"])(t,"clien",[]),Object(n["a"])(t,"users",[]),Object(n["a"])(t,"cliente",""),Object(n["a"])(t,"client",""),Object(n["a"])(t,"editMode",!1),Object(n["a"])(t,"form",{titulo:"",iniciativa:"",descripcion_iniciativa:[],promotor:"",digital:"",ecologica:"",observaciones:"",descripcion:"",promotores:[],dimension_ecologica:[],dimension_digital:[],metas:[],objetivo:"",objetivos:[],presupuesto:"",empresa_id:"",aprueba_id:""}),t},watch:{cliente:function(t){this.form.cliente_id=t,this.listarEmpresas()},client:function(t){this.form.cliente_id=t,this.listarProyectos()}},props:{finishButtonText:{type:String,default:"Completar",hidden:!0}},methods:Object(s["a"])(Object(s["a"])({},Object(m["b"])(["guardarUsuario"])),{},{submit:function(){return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:console.log("email submitted!");case 1:case"end":return t.stop()}}),t)})))()},resete:function(){var t=this.form;for(var e in t)"descripcion_iniciativa"==e?this.form.descripcion_iniciativa=[]:"promotores"==e?this.form.promotores=[]:"objetivos"==e?this.form.objetivos=[]:"dimension_ecologica"==e?this.form.dimension_ecologica=[]:"dimension_digital"==e?this.form.dimension_digital=[]:this.form[e]=""},switchLoc:function(){var t=this;this.editMode?this.$refs.form.validate().then((function(e){e&&t.editarProyecto()})):this.$refs.form.validate().then((function(e){e&&t.agregarProyecto()}))},cargarPromotor:function(){this.form.promotores.push({nombre:this.form.promotor})},eliminarpromotor:function(t){this.form.promotores.splice(t,1)},cargarObjetivo:function(){this.form.objetivos.push({nombre:this.form.objetivo})},eliminarObjetivo:function(t){this.form.objetivos.splice(t,1)},cargarIniciativa:function(){this.form.descripcion_iniciativa.push({nombre:this.form.iniciativa})},eliminarIniciativa:function(t){this.form.descripcion_iniciativa.splice(t,1)},cargarDigital:function(){this.form.dimension_digital.push({nombre:this.form.digital})},eliminarDigital:function(t){this.form.dimension_digital.splice(t,1)},cargarEcologica:function(){this.form.dimension_ecologica.push({nombre:this.form.ecologica})},eliminarEcologica:function(t){this.form.dimension_ecologica.splice(t,1)},onFiltered:function(t){this.totalRows=t.length,this.currentPage=1},agregarProyecto:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var o,i,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(r in o=new FormData,i=t.form,i)"descripcion_iniciativa"==r||"promotores"==r||"objetivos"==r||"dimension_ecologica"==r||"dimension_digital"==r?o.append(r,JSON.stringify(i[r])):o.append(r,i[r]);return t.file&&o.append("filename",t.file),e.next=6,t.axios.post("api/proyectos",o,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){200==e.status&&(t.$swal("Creado!!!","","success"),t.listarProyectos(),t.$root.$emit("bv::hide::modal","modal","#btnShow"))})).catch((function(e){t.$swal("Nose pudo crear!!!","","warning")}));case 6:case"end":return e.stop()}}),e)})))()},editarProyecto:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var o,i,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(r in o=new FormData,i=t.form,i)"descripcion_iniciativa"==r||"promotores"==r||"objetivos"==r||"dimension_ecologica"==r||"dimension_digital"==r?o.append(r,JSON.stringify(i[r])):o.append(r,i[r]);return t.file&&o.append("filename",t.file),e.next=6,t.axios.put("api/proyectos",o,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){if(200==e.status)for(var o in t.$swal("Editado con exito","","success"),t.listarProyectos(),t.$root.$emit("bv::hide::modal","modal","#btnShow"),i)t.form[o]=""})).catch((function(e){t.$swal("ocurrio un problema","","warning")}));case 6:case"end":return e.stop()}}),e)})))()},setearObservaciones:function(t){for(var e=0;e<this.proyectos.length;e++)if(this.proyectos[e].id===t)return this.form.id=this.proyectos[e].id,this.form.observaciones=this.proyectos[e].observaciones,this.form.elabora_id=this.proyectos[e].elabora_id,void this.$root.$emit("bv::show::modal","modal_observaciones","#btnShow")},setear:function(t){for(var e=0;e<this.proyectos.length;e++)if(this.proyectos[e].id===t)return this.cliente=this.proyectos[e].empresa.cliente_id,this.form.id=this.proyectos[e].id,this.form.numero=this.proyectos[e].numero,this.form.titulo=this.proyectos[e].titulo,this.form.status=this.proyectos.status,this.form.presupuesto=this.proyectos[e].presupuesto,this.form.promotores=JSON.parse(this.proyectos[e].promotores),this.form.objetivos=JSON.parse(this.proyectos[e].objetivos),this.form.dimension_ecologica=JSON.parse(this.proyectos[e].dimension_ecologica),this.form.dimension_digital=JSON.parse(this.proyectos[e].dimension_digital),this.form.descripcion_iniciativa=JSON.parse(this.proyectos[e].descripcion_iniciativa),this.form.justificacion=this.proyectos[e].justificacion,this.form.descripcion=this.proyectos[e].descripcion,this.form.empresa_id=this.proyectos[e].empresa_id,this.form.archivo=this.proyectos[e].archivo,this.form.cliente_id=this.proyectos[e].empresa.cliente_id,this.form.aprueba_id=this.proyectos[e].aprueba_id,void this.$root.$emit("bv::show::modal","modal","#btnShow")},verdocumento:function(t){for(var e=0;e<this.proyectos.length;e++)if(this.proyectos[e].id===t)return this.cliente=this.proyectos[e].empresa.cliente_id,this.form.id=this.proyectos[e].id,this.form.numero=this.proyectos[e].numero,this.form.titulo=this.proyectos[e].titulo,this.form.status=this.proyectos.status,this.form.presupuesto=this.proyectos[e].presupuesto,this.form.promotores=JSON.parse(this.proyectos[e].promotores),this.form.objetivos=JSON.parse(this.proyectos[e].objetivos),this.form.dimension_ecologica=JSON.parse(this.proyectos[e].dimension_ecologica),this.form.dimension_digital=JSON.parse(this.proyectos[e].dimension_digital),this.form.descripcion_iniciativa=JSON.parse(this.proyectos[e].descripcion_iniciativa),this.form.justificacion=this.proyectos[e].justificacion,this.form.empresa_id=this.proyectos[e].empresa_id,this.form.archivo=this.proyectos[e].archivo,this.form.cliente_id=this.proyectos[e].empresa.cliente_id,this.form.aprueba_id=this.proyectos[e].empresa.aprueba_id,void this.$root.$emit("bv::show::modal","modal_ver","#btnShow")},generateReport:function(){this.$refs.html2Pdf.generatePdf()},eliminarProyecto:function(t){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function o(){var i;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return i=new FormData,i.append("id",t),o.next=4,e.axios.post("api/proyectos/delete",i,{headers:{"Content-Type":"multipart/form-data"}}).then((function(t){200==t.status&&(e.$swal("Eliminado con exito!","","success"),e.listarProyectos())})).catch((function(t){console.log(t.response.data.menssage),e.$swal(t.response.data)}));case 4:case"end":return o.stop()}}),o)})))()},eliminar:function(t){var e=this;this.$swal({title:"Desea borrar este proyecto?",icon:"question",iconHtml:"",confirmButtonText:"Si",cancelButtonText:"No",showCancelButton:!0,showCloseButton:!0}).then((function(o){o.isConfirmed&&e.eliminarProyecto(t)}))},notificarConsulta:function(t,e){var o=this;this.$swal({title:"¿Desea notificar este proyecto al administrador?",icon:"question",iconHtml:"",confirmButtonText:"Si",cancelButtonText:"No",showCancelButton:!0,showCloseButton:!0}).then((function(i){i.isConfirmed&&o.notificarProyecto(t,e)}))},notificarProyecto:function(t,e){var o=this;return Object(a["a"])(regeneratorRuntime.mark((function i(){var r;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return r=new FormData,r.append("aprueba_id",e),r.append("id",t),i.next=5,o.axios.post("api/proyectos/notificar",r).then((function(t){200==t.status&&(o.$swal("Notificado con exito ","","success"),o.listarProyectos())})).catch((function(t){o.$swal("ocurrio un problema","","warning")}));case 5:case"end":return i.stop()}}),i)})))()},notificarConsultaAprobar:function(t,e){var o=this;this.$swal({title:"Desea aprobar este proyecto?",icon:"question",iconHtml:"",confirmButtonText:"Si",cancelButtonText:"No",showCancelButton:!0,showCloseButton:!0}).then((function(i){i.isConfirmed&&o.notificarProyectoAprobacion(t,e)}))},notificarProyectoAprobacion:function(t,e){var o=this;return Object(a["a"])(regeneratorRuntime.mark((function i(){var r;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return r=new FormData,r.append("elabora_id",e),r.append("id",t),i.next=5,o.axios.post("api/proyectos/aprobar",r).then((function(t){200==t.status&&(o.$swal("Notificado con exito ","","success"),o.listarProyectos())})).catch((function(t){o.$swal("ocurrio un problema","","warning")}));case 5:case"end":return i.stop()}}),i)})))()},notificarConsultaRechazar:function(){var t=this;this.$swal({title:"Desea rechazar este proyecto?",icon:"question",iconHtml:"",confirmButtonText:"Si",cancelButtonText:"No",showCancelButton:!0,showCloseButton:!0}).then((function(e){e.isConfirmed&&t.notificarProyectoRechazar()}))},notificarProyectoRechazar:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o=new FormData,o.append("elabora_id",t.form.elabora_id),o.append("id",t.form.id),o.append("observaciones",t.form.observaciones),e.next=6,t.axios.post("api/proyectos/rechazar",o).then((function(e){200==e.status&&(t.$swal("Rechazado con exito ","","success"),t.$root.$emit("bv::hide::modal","modal_observaciones","#btnShow"),t.listarProyectos())})).catch((function(e){t.$swal("ocurrio un problema","","warning")}));case 6:case"end":return e.stop()}}),e)})))()},listarclientes:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.axios.get("api/clientes").then((function(e){t.clientes=e.data,t.clien=e.data})).catch((function(t){console.log("error"+t)}));case 2:case"end":return e.stop()}}),e)})))()},listarEmpresas:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o=new FormData,o.append("cliente_id",t.form.cliente_id),e.next=4,t.axios.post("api/empresas/listar",o).then((function(e){t.empresas=e.data})).catch((function(t){console.log("error"+t)}));case 4:case"end":return e.stop()}}),e)})))()},listarProyectos:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o=new FormData,o.append("cliente_id",t.form.cliente_id),e.next=4,t.axios.post("api/proyectos/listar",o).then((function(e){t.proyectos=e.data})).catch((function(t){console.log("error"+t)}));case 4:case"end":return e.stop()}}),e)})))()},setEmail:function(){this.form.username=this.form.email},setRoles:function(){"Administrador"===this.form.tipo?(this.form.codigo="",this.form.entidad="No",this.form.cargo="",this.form.roles="3"):"Coordinador"===this.form.tipo?(this.form.entidad="No",this.form.cargo="",this.form.roles="2"):this.form.roles="1"},listarUsers:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.axios.get("api/user/admin").then((function(e){t.users=e.data.rows})).catch((function(t){console.log("error"+t)}));case 2:case"end":return e.stop()}}),e)})))()},onFileChange:function(t){var e=t.target.files[0];this.url=URL.createObjectURL(e)},onFileChangeFirma:function(t){var e=t.target.files[0];this.url_firma=URL.createObjectURL(e)},toggleModal:function(){this.modal=!this.modal},session:function(){if(localStorage.getItem("token")){var t=localStorage.getItem("token");this.guardarUsuario(t)}else this.$router.push({name:"Home"})}}),created:function(){this.session(),this.listarclientes(),this.listarUsers()},computed:{rows:function(){return this.proyectos.length}}},w=y,C=o("2877"),x=Object(C["a"])(w,i,r,!1,null,null,null);e["default"]=x.exports},b65a:function(t,e,o){t.exports=o.p+"img/nott.4cf0a693.svg"},baad:function(t,e,o){t.exports=o.p+"img/document.fbae6597.svg"},e0a5:function(t,e,o){t.exports=o.p+"img/undraw_Collaboration.c9754fe1.svg"},f2aa:function(t,e,o){t.exports=o.p+"img/subirpro.fb0377fe.svg"}}]);
//# sourceMappingURL=chunk-39c96584.0e4f0d56.js.map